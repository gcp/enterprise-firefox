<html>
<head>
<meta charset="utf-8">
</head>
<body>
<script>
// Flood decodingInfo() operations from workers.
const config = {
  type: 'file',
  video: { contentType: 'video/webm; codecs="vp9"', width: 1920, height: 1080, bitrate: 10000000, framerate: 30 }
};

const workerCode = `
  const config = { type: 'file', video: { contentType: 'video/webm; codecs="vp9"', width: 1920, height: 1080, bitrate: 10000000, framerate: 30 } };
  // Start many parallel decodingInfo() operations
  for (let i = 0; i < 100; i++) {
    navigator.mediaCapabilities.decodingInfo(config).catch(() => {});
  }
`;
const blob = new Blob([workerCode], { type: 'application/javascript' });
for (let i = 0; i < 10; i++) {
  new Worker(URL.createObjectURL(blob));
}
for (let i = 0; i < 50; i++) {
  navigator.mediaCapabilities.decodingInfo(config).catch(() => {});
}
</script>
</body>
</html>
